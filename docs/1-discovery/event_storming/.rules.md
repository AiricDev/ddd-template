# AI辅助DDD软件工程模板：Events Storming子规则（Discovery阶段）

## 子活动概述与定位
此子目录聚焦事件风暴（Event Storming）工作流：从业务叙述中提取领域事件（Domain Events）、命令（Commands）和参与者（Actors）。这是DDD discovery的核心起点，演进传统“用例分析”到协作式脑暴。目标：生成事件序列，作为痛点分析和上下文映射的基础。

- **思维方式（Agent与开发者共用）**：高度探索性、迭代脑暴。鼓励“从命令到事件”的思维链，生成多个变体以覆盖不确定性。
- **Agent行为模式**：作为“脑暴 facilitator”，AI引导开发者通过步骤化互动：先生成种子事件，然后提问扩展。主动建议变体（e.g., “乐观 vs. 悲观场景”），确保开发者输入业务细节。
- **协作原则（继承阶段）**：用户输入叙述 -> AI生成初始事件列表 + 变体 + 澄清提问 -> 用户添加细节 -> AI扩展序列。
- **参考输入**：业务描述、访谈笔记（e.g., 相对路径：../../external/prd.md）。
- **产出文档类型**：Markdown列表（事件序列）。这些文档服务于后续子活动：喂入痛点分析，提供上下文映射的事件基础。
- **目标服务**：揭示隐含业务流程，减少模型偏差；输出应多样化，覆盖至少2-3场景变体。

人类开发者：输入业务片段，让AI引导风暴session。AI工具：使用规则引导互动，确保输出是共同脑暴结果。

## 子规则定义（JSON-like，供AI解析，继承discovery阶段）
{
  "subphase": "events_storming",
  "inherited_from": "discovery阶段规则（合并mindset、prompt_template）",
  "mindset_extension": "脑暴式：为每个事件生成2-3变体（e.g., happy path vs. error path）",
  "agent_behavior": {
    "guide_developer": "以步骤引导：1. 种子事件；2. 扩展序列；3. 提问变体。结束时问'这个序列遗漏了什么参与者？'",
    "response_style": "动态、互动：使用编号步骤呈现输出，便于开发者插入反馈"
  },
  "prompt_template": "基于{user_input}，进行事件风暴：生成事件序列（格式：1. 命令: [actor] -> 事件: 描述 [变体]），并引导开发者通过{clarification_questions}添加细节。",
  "reference_inputs": ["业务叙述", "上游文档（e.g., PRD）"],
  "output_formats": {
    "storm_session": "Markdown编号列表：1. 命令: 下单 [客户] -> 事件: 订单创建 [变体: 库存不足时拒绝]"
  },
  "goals_served": ["构建事件基础，为DDD聚合边界提供输入"],
  "clarification_questions_template": [
    "这个命令的触发actor是谁？",
    "是否有相关事件变体（如错误处理）？",
    "这个事件如何链接到下一个？"
  ],
  "validation_rules": "确保序列逻辑连贯；变体覆盖>50%不确定性"
}

## 示例Agent引导互动
- **人类输入**： "订单域的下单流程。"
- **AI响应**： 步骤1: 种子事件生成...（列表）; 步骤2: 变体建议...; 引导："这个下单事件是否有库存检查变体？请描述。"
