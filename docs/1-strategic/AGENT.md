# Strategic AGENT

目标
- 确立产品/系统的业务蓝图：目标与成功度量、子域与上下文边界、上下文关系与协作策略、通用语言在业务语境下的用法。
- 协作节奏以“文件”为单位：先整文件初稿，再逐章/逐条修订；复杂主题用“新增同构文件”分解，不强制过程，只约束产出形态与质量性质。

文件清单
- vision.md：业务目标、价值度量、范围边界、非目标。
- domain-map.md：子域划分（核心/支撑/通用）、能力概览、候选上下文工作表。
- context-map.md：上下文关系图（文字版）、协作/集成策略、关系风险。
- ubiquitous-language.md：通用语言在战略语境下的用法补充（与 governance/glossary.md 呼应）。

文件级结果契约与节奏
- vision.md
  - 结构
    - 概述：愿景一句话
    - 目标树：3–5个可度量目标（含指标与阈值）
    - 范围边界：本阶段不做的事项（至少1条）
    - 成功度量：关键KPI/北极星指标与采集方式
  - 节奏：首轮整文件初稿（含目标树与不做清单），随后逐章修订（优先补度量与采集方式）。
  - 质量性质：目标具体可测；度量与下游质量场景可映射；非目标清晰，避免范围蔓延。

- domain-map.md
  - 结构
    - 子域列表：名称、类型（核心/支撑/通用）、一句话职责、非目标一句话
    - 能力概览：每个子域1–3条关键业务能力
    - 候选上下文工作表：名称/职责/非目标/关键术语(3)/上游一句话/下游一句话
  - 节奏：首轮整文件初稿（至少3个子域与2–4个候选上下文条目），随后针对单个子域或单个上下文条目逐条修订。
  - 质量性质：每个核心子域能映射至少1类用例；非目标避免与相邻子域重叠；关键术语来自或补充至 governance/glossary.md。

- context-map.md
  - 结构
    - 关系清单：Source→Target，一句话策略（同步RPC/异步事件/文件批处理/ACL/防腐层），一个主要风险点
    - 集成策略说明：按策略类型给最小适用条件与注意事项（1–2行/项）
    - 边界与迁移：遗留系统/第三方的边界策略与阶段性迁移要点（可选）
  - 节奏：首轮整文件初稿（3–6条关系），随后逐条关系修订；必要时新增“策略说明”项。
  - 质量性质：每条关系包含存在理由与可操作策略；至少1条标注风险与潜在缓解；优先指向将来事件/契约的落点。

- ubiquitous-language.md
  - 结构
    - 业务语境用法：围绕核心术语，给出在战略层的使用语义（与治理术语卡互补，避免重复定义）
    - 语义变体：在不同上下文的词义差异与界定词
    - 禁用/避免用法：减少歧义的约束性说明
  - 节奏：首轮整文件初稿（围绕3–5个高频术语补语境用法），随后逐条补充与修订。
  - 质量性质：与 governance/glossary.md 保持一致或显式差异描述；能被战术层直接引用。

抽象验收性质（DoD-Properties）
- 一致性：术语与 0-governance/glossary.md 对齐；如有差异，需在 ubiquitous-language.md 明确语义界定。
- 完备性（就当前阶段）：vision 含明确“不做”范围；domain-map 至少3个子域；context-map 至少3条关系；ubiquitous-language 覆盖3–5个高频术语语境。
- 可证伪性：context-map 的每条关系标注一个可被挑战的前提（如“峰值QPS<2000时采用同步”）；vision 的目标附度量阈值，便于日后检验。
- 可操作性：每个战略结论给出下游落地提示（将映射到 use-cases/events/contracts/quality 场景），避免悬浮。

对话节奏（内嵌规则）
- 初稿阶段：针对每个文件单独生成“整文件初稿”，严格按结果契约输出，仅限该文件内容，并在文末追加“## 变更”首条“v1.0 首版”。
- 修订阶段：每轮仅修改一个章节或一个条目；在指令中粘贴被修改段落的原文，模型仅输出该段修订版。
- 扩展阶段（拆分）：当 domain-map 或 context-map 过长或跨域发散时，按“文件拆分规范”拆为 domain-map-<context>.md / context-map-<context>.md；原文件保留“参见”占位。

与其他目录的对齐提示
- 与 0-governance：新增或变更关键术语/约束/决策/风险时，先更新治理文件的对应条目，再回到本目录修订，保持“语言与约束先行”。
- 与 2-tactical：每个子域或上下文至少导出一个“候选用例类别”，作为后续 use-cases.md 骨架入口；context-map 的策略会决定是写“事件条目”还是“同步契约条目”优先。
- 与 3-quality：vision 的成功度量与质量场景（scenarios.md）相互映射；若有冲突，以 governance/constraints.md 的硬约束优先，更新场景。

文件拆分规范（战略层）
- 触发条件：单文件>150–200行；跨3个以上上下文或业务域；审阅经常需要跨页跳转、影响理解。
- 命名建议：domain-map-<line>.md（如 domain-map-commerce.md）；context-map-<line>.md；ubiq-language-<line>.md。
- 迁移方式：成组迁移，原文件保留“参见新文件章节X”；新文件“## 变更”首条注明“从旧文件迁移”。

变更记录约定（所有战略文件一致）
- 在文件末尾“## 变更”仅追加一行摘要：
  - [vX.Y - YYYY-MM-DD] 范围/动机/变更/影响/验证
- 示例
  - [v1.0 - 2025-08-13] 首版
  - [v1.1 - 2025-08-20] 范围：订单-支付关系策略；动机：削峰；变更：同步改异步事件；影响：tactical/events.md 新增 PaymentRequested；验证：scenarios.md 性能目标更新

---

示例文件壳（可直接放入 1-strategic/）

vision.md
# Vision
- 愿景：一句话
- 目标树：
  - 目标A：指标/阈值/采集方式
  - 目标B：指标/阈值/采集方式
- 范围边界（本阶段不做）：
  - …
- 成功度量：
  - 北极星指标：…
  - 支撑指标：…

## 变更
- [v1.0 - YYYY-MM-DD] 首版

domain-map.md
# Domain Map
## 子域
- 名称：订单（核心）
  职责：一句话
  非目标：一句话
  能力：A/B/C

- 名称：支付（支撑）
  职责：一句话
  非目标：一句话
  能力：A/B

## 候选上下文工作表
- 名称：订单
  职责：…
  非目标：…
  关键术语：订单/支付/库存
  上游：商品
  下游：支付

## 变更
- [v1.0 - YYYY-MM-DD] 首版

context-map.md
# Context Map
## 关系清单
- 订单 → 支付
  策略：异步事件（PaymentRequested/PaymentSettled）
  风险：网关超时导致结算延迟

- 订单 → 库存
  策略：同步扣减 + 幂等防重
  风险：热点库存争用

## 策略说明
- 异步事件：削峰、解耦；需幂等与顺序保障
- 同步RPC：一致性强；峰值下需限流与退避

## 变更
- [v1.0 - YYYY-MM-DD] 首版

ubiquitous-language.md
# Ubiquitous Language（战略语境）
- 订单（在战略层）：
  用法：指客户购买的业务对象，以生命周期管理为主
  与治理术语差异：无/差异说明…
  禁用/避免：避免与“交易单”混用

- 支付（在战略层）：
  用法：对订单金额进行资金结算的业务过程
  差异：与“对账/退款”区分
  禁用/避免：…

## 变更
- [v1.0 - YYYY-MM-DD] 首版

---

使用建议（文件级）
- 初稿：针对四个文件逐一生成整文件初稿，严格按各自结构输出，仅含该文件内容与“## 变更”的首条记录。
- 修订：复制目标条目或章节到对话中，下达“仅修订该条/该章”的指令，模型只返回该段更新文本。
- 分解：当 domain-map/context-map 过长，按“文件拆分规范”新增同构文件并迁移相关条目；原文件放“参见”占位。
